<!DOCTYPE html>
<!--<html manifest="manifest.appcache">-->
<html>
<head>
    <!-- TODO: Create Makefile or Node module to parse all pages in the same page. -->
    <!-- TODO: Minify CSS and JS in build process. -->
    <meta charset="utf-8"/>
    <meta http-equiv="Access-Control-Allow-Origin" content="*">
    <meta content="yes" name="apple-mobile-web-app-capable" />
    <meta content="black" name="apple-mobile-web-app-status-bar-style" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <title>OnTheSpot Mobile</title>
    <link rel="stylesheet" href="css/application.min.css" />
    <!--<script src="cordova.js"></script>-->
    <script src="phonegap.js"></script>
    <script src="cdv-plugin-fb-connect.js"></script>
    <script src="facebook-js-sdk.js"></script>
    <script src="js/application.min.js"></script>
    <link rel="shortcut icon" href="img/icons/webapp/icon64.png">
    <!--<script src="http://localhost:8080/target/target-script-min.js#anonymous"></script>-->
</head>
<body>


<div data-role="page" id="homepage" data-title="Home" data-theme="z">
    <div data-role="header" data-position="fixed" data-theme="z">
        <a href="#homenav" data-icon="menu" data-iconpos="notext" data-corners="false" data-theme="z">Menu</a>
        <div class="logo-header" data-inline="true">
            <img src="img/logo_header.png" />
        </div>
    </div>
    <div data-role="content">
        <ul data-role="listview">
            <li><a href="index.html#spotlistingpage" data-transition="slide">Favorite Spots</a></li>
            <li><a href="index.html#spotlistingpage" data-transition="slide">Search by Cities</a></li>
            <li><a href="index.html#spotlistingpage" data-transition="slide">Search by Categories</a></li>
        </ul>
    </div>
    <div data-role="panel" id="homenav" data-display="reveal" data-dismissible="true" data-theme="a">
        <form>
            <label for="homesearch" class="ui-hidden-accessible">Search</label>
            <input type="search" name="search" id="homesearch" value="" placeholder="Search" data-mini="true" data-theme="z" />
        </form>
        <br />
        <ul data-role="listview" data-theme="a">
            <li><a href="index.html#homepage" data-transition="flow">Home</a></li>
            <li><a href="index.html#loginpage" data-transition="flow">Notifications</a></li>
            <li><a href="#">User Settings</a></li>
            <li><a href="index.html#help" data-transition="flow">Help</a></li>
        </ul>
    </div>
</div>



<div data-role="page" id="loginpage" data-title="Login Page" data-theme="z">
<button onclick="login()">Login</button>
<button onclick="me()">Me</button>
<!--<button onclick="getSession()">Get session</button>-->
<button onclick="getLoginStatus()">Get login</button>
<button onclick="logout()">Logout</button>
<button onclick="facebookWallPost()">facebookWallPost</button>
<button onclick="publishStoryFriend()">friendstory</button>

<div id="data">loading ...</div>

<div id="fb-root"></div>

<!-- These are the notifications that are displayed to the user through pop-ups if the above JS files does not exist in the same directory-->
<script>
    /*
    if ((typeof cordova == 'undefined') && (typeof Cordova == 'undefined')) alert('Cordova variable does not exist. Check that you have included cordova.js correctly');
    if (typeof CDV == 'undefined') alert('CDV variable does not exist. Check that you have included cdv-plugin-fb-connect.js correctly');
    if (typeof FB == 'undefined') alert('FB variable does not exist. Check that you have included the Facebook JS SDK file.');

    FB.Event.subscribe('auth.login', function(response) {
        alert('auth.login event');
    });

    FB.Event.subscribe('auth.logout', function(response) {
        alert('auth.logout event');
    });

    FB.Event.subscribe('auth.sessionChange', function(response) {
        alert('auth.sessionChange event');
    });

    FB.Event.subscribe('auth.statusChange', function(response) {
        alert('auth.statusChange event');
    });
    */

    /*function getSession() {
     alert("session: " + JSON.stringify(FB.getSession()));
     }
     */

    /*
    function getLoginStatus() {
        FB.getLoginStatus(function(response) {
            if (response.status == 'connected') {
                alert('logged in');
            } else {
                alert('not logged in');
            }
        });
    }
    var friendIDs = [];
    var fdata;
    function me() {
        FB.api('/me', function(me) {
            alert(me.name);
        });
        FB.api('/me/friends', { fields: 'id, name, picture' },  function(response) {
            if (response.error) {
                alert(JSON.stringify(response.error));
            } else {
                var data = document.getElementById('data');
                fdata=response.data;
                console.log("fdata: "+fdata);
                response.data.forEach(function(item) {
                    var d = document.createElement('div');
                    d.innerHTML = "<img src="+item.picture+"/>"+item.name;
                    data.appendChild(d);
                });
            }
            var friends = response.data;
            console.log(friends.length);
            for (var k = 0; k < friends.length && k < 200; k++) {
                var friend = friends[k];
                var index = 1;

                friendIDs[k] = friend.id;
                //friendsInfo[k] = friend;
            }
            console.log("friendId's: "+friendIDs);
        });
    }

    function logout() {
        FB.logout(function(response) {
            alert('logged out');
        });
    }

    function login() {
        FB.login(
            function(response) {
                if (response.session) {
                    alert('logged in');
                } else {
                    alert('not logged in');
                }
            },
            { scope: "email" }
        );
    }


    function facebookWallPost() {
        console.log('Debug 1');
        var params = {
            method: 'feed',
            name: 'Facebook Dialogs',
            link: 'https://developers.facebook.com/docs/reference/dialogs/',
            picture: 'http://fbrell.com/f8.jpg',
            caption: 'Reference Documentation',
            description: 'Dialogs provide a simple, consistent interface for applications to interface with users.'
        };
        console.log(params);
        FB.ui(params, function(obj) { console.log(obj);});
    }

    function publishStoryFriend() {
        randNum = Math.floor ( Math.random() * friendIDs.length );

        var friendID = friendIDs[randNum];
        if (friendID == undefined){
            alert('please click the me button to get a list of friends first');
        }else{
            console.log("friend id: " + friendID );
            console.log('Opening a dialog for friendID: ', friendID);
            var params = {
                method: 'feed',
                to: friendID.toString(),
                name: 'Facebook Dialogs',
                link: 'https://developers.facebook.com/docs/reference/dialogs/',
                picture: 'http://fbrell.com/f8.jpg',
                caption: 'Reference Documentation',
                description: 'Dialogs provide a simple, consistent interface for applications to interface with users.'
            };
            FB.ui(params, function(obj) { console.log(obj);});
        }
    }

    document.addEventListener('deviceready', function() {
        try {
            alert('Device is ready! Make sure you set your app_id below this alert.');
            FB.init({ appId: "492964707460823", nativeInterface: CDV.FB, useCachedDialogs: false });
            document.getElementById('data').innerHTML = "";
        } catch (e) {
            alert(e);
        }
    }, false);
    */
</script>
<div id="log"></div>
</div>


<div data-role="page" id="spotlistingpage" data-title="Spot Listing" data-theme="z">
    <div data-role="header" data-position="fixed" data-theme="z">
        <a href="#spotlistingnav" data-icon="menu" data-iconpos="notext" data-corners="false" data-theme="z">Menu</a>
        <div class="logo-header" data-inline="true">
            <img src="img/logo_header.png" />
        </div>
    </div>
    <div data-role="content" data-theme="z">
        <ul id="list" data-role="listview" data-autodividers="true" data-theme="z" data-dividertheme="z">
            <li><a href="index.html">Adam Kinkaid</a></li>
            <li><a href="index.html">Alex Wickerham</a></li>
            <li><a href="index.html">Avery Johnson</a></li>
            <li><a href="index.html">Bob Cabot</a></li>
            <li><a href="index.html">Caleb Booth</a></li>
            <li><a href="index.html">Christopher Adams</a></li>
            <li><a href="index.html">Culver James</a></li>
            <li><a href="index.html">David Walsh</a></li>
            <li><a href="index.html">Drake Alfred</a></li>
            <li><a href="index.html">Elizabeth Bacon</a></li>
            <li><a href="index.html">Emery Parker</a></li>
            <li><a href="index.html">Enid Voldon</a></li>
            <li><a href="index.html">Francis Wall</a></li>
            <li><a href="index.html">Graham Smith</a></li>
            <li><a href="index.html">Greta Peete</a></li>
            <li><a href="index.html">Harvey Walls</a></li>
            <li><a href="index.html">Mike Farnsworth</a></li>
            <li><a href="index.html">Murray Vanderbuilt</a></li>
            <li><a href="index.html">Nathan Williams</a></li>
            <li><a href="index.html">Paul Baker</a></li>
            <li><a href="index.html">Pete Mason</a></li>
            <li><a href="index.html">Rod Tarker</a></li>
            <li><a href="index.html">Sawyer Wakefield</a></li>
        </ul>
    </div>
    <div data-role="panel" id="spotlistingnav" data-display="reveal" data-dismissible="true" data-theme="a">
        <form>
            <label for="search" class="ui-hidden-accessible">Search</label>
            <input type="search" name="search" id="search" value="" placeholder="Search" data-mini="true" data-theme="z" />
        </form>
        <br />
        <ul data-role="listview" data-theme="a">
            <li><a href="index.html#homepage" data-transition="flow">Home</a></li>
            <li><a href="index.html#loginpage" data-transition="flow">Notifications</a></li>
            <li><a href="#">User Settings</a></li>
            <li><a href="index.html#help" data-transition="flow">Help</a></li>
        </ul>
    </div>
</div>



<div id="help" data-role="page" data-title="Help" data-theme="z">
    <div data-role="header" data-position="fixed" data-theme="z">
        <a href="#helpnav" data-icon="menu" data-iconpos="notext" data-corners="false" data-theme="z">Menu</a>
        <div class="logo-header" data-inline="true">
            <img src="img/logo_header.png" />
        </div>
    </div>
    <div data-role="content" data-theme="z">
        <p>
            Si vous avez quelconque probleme, suggestion, ou whatever, veuillez nous contacter et cela va nous faire un plaisir de vous repondre dans les plus bref delais.
        </p>
        <form id="contact-form" data-ajax="false">
            <label for="Contact_Name" class="ui-hidden-accessible">Nom</label>
            <span id="Contact_Name_Error" class="error display-none"></span>
            <input type="text" name="Contact_Name" id="Contact_Name" value="" placeholder="Nom" class="required" required="required" />
            <label for="Contact_Message_Kind" class="select ui-hidden-accessible">Choissisez la categorie de message</label>
            <span id="Contact_Message_Kind_Error" class="error display-none"></span>
            <select name="Contact_Message_Kind" id="Contact_Message_Kind" class="required">
                <option value="standard">Suggestion</option>
                <option value="rush">Bug</option>
                <option value="express">Probleme</option>
                <option value="express">Question</option>
            </select>
            <label for="Contact_Subject" class="ui-hidden-accessible">Sujet :</label>
            <span id="Contact_Subject_Error" class="error display-none"></span>
            <input type="text" name="Contact_Subject" id="Contact_Subject" value="" placeholder="Sujet" class="required" />
            <label for="Contact_Message" class="ui-hidden-accessible">Message</label>
            <span id="Contact_Message_Error" class="error display-none"></span>
            <textarea name="Contact_Message" id="Contact_Message" placeholder="Ecrivez votre message ici" class="required" required="required"></textarea>
            <button type="submit" data-theme="z" name="Contact_Submit">Submit</button>
        </form>
    </div>
    <div data-role="panel" id="helpnav" data-display="reveal" data-dismissible="true" data-theme="a">
        <form>
            <label for="search" class="ui-hidden-accessible">Search</label>
            <input type="search" name="search" id="search" value="" placeholder="Search" data-mini="true" data-theme="z" />
        </form>
        <br />
        <ul data-role="listview" data-theme="a">
            <li><a href="index.html#homepage" data-transition="flow">Home</a></li>
            <li><a href="index.html#loginpage" data-transition="flow">Notifications</a></li>
            <li><a href="#">User Settings</a></li>
            <li><a href="index.html#help" data-transition="flow">Help</a></li>
        </ul>
    </div>
</div>

<!-- Phonegap Debugger -->
<!--<script src="http://debug.build.phonegap.com/target/target-script-min.js#onthespot-mobile-kaven-vm01"></script>-->
</body>
</html>
